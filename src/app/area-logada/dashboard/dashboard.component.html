<div class="container-fluid">
  <div class="dashboard-header row">
    <h2>
      Bem-vindo(a) {{usuario?.nome}} 
    </h2>   
    <div class="btn-group pb-3 pt-3 overflow-auto scroll" role="group" aria-label="Basic example">
      <button type="button" (click)="atualizarDados()" class="btn btn-outline-primary">
          <i title="Recarregar Dados" class="bi bi-arrow-repeat"></i>
          <p class="m-0">Recarregar</p>     
      </button>

      <button type="button" (click)="abrirModal(modalFiltro)" class="btn btn-outline-primary">
        <i title="Filtrar Movimentações" class="bi bi-funnel"></i>
        <p class="m-0">Filtrar Movimentações</p>     
      </button>

      <button type="button" (click)="abrirModal(modalMovimentarConta)" class="btn btn-outline-primary">
        <i title="Movimentar conta" class="bi bi-upc"></i>
        <p class="m-0">Movimentar Conta</p>     
      </button>

      <button type="button" (click)="abrirModal(modalTransferenciaEntreContas)" class="btn btn-outline-primary">
        <i title="Realizar Transferência" class="bi bi-box-arrow-up"></i>
        <p class="m-0">Realizar Transferência</p>     
      </button>
    </div>                 
  </div>  

  <div class="contas">
    <div class="row">
      <div class="col-md-6">  
        <div class="card" style="width: 100%;">
          <div class="card-body">
            <h5 class="card-title"><strong>Conta Débito</strong></h5>
            <h6 class="card-subtitle mb-2 text-muted" id="saldoContaDebito">Saldo: {{dashboard?.contaBanco?.saldo | currency:"BRL"}}</h6>                                                                        
          </div>
        </div>
      </div>                
      <div class="col-md-6">  
        <div class="card" style="width: 100%;">
          <div class="card-body">
            <h5 class="card-title"><strong>Conta Crédito</strong></h5>
            <h6 class="card-subtitle mb-2 text-muted" id="saldoContaCredito">Saldo: {{dashboard?.contaCredito?.saldo | currency:"BRL"}}</h6>                                                                        
          </div>
        </div>
      </div>
    </div>                            
  </div>
  <div class="movimentacoes">
    <div class="row">
      <div class="col-md-12">  
        <div class="card" style="width: 100%;">
          <div class="card-body">
            <h5 class="card-title"><strong>Movimentações</strong></h5>
            <h6 class="card-subtitle mb-2 text-muted" id="lblTipoConta">  
              Tipo: {{textoMovimentacao}}                              
            </h6> 
            <h6 class="card-subtitle mb-2 text-muted" id="" *ngIf="dataInicio == dataFim">   
              Data: {{dataInicio | date:"dd/MM/yyyy"}}
            </h6> 
            <h6 class="card-subtitle mb-2 text-muted" id="" *ngIf="dataInicio != dataFim">   
              Data Inicio: {{dataInicio | date:"dd/MM/yyyy"}}
            </h6> 
            <h6 class="card-subtitle mb-2 text-muted" id="" *ngIf="dataInicio != dataFim">   
              Data Fim: {{dataFim | date:"dd/MM/yyyy"}}
            </h6> 
            <div class="corpoMovimentacoes" id="corpoMovimentacoes">  
              <div *ngIf="!!dashboard?.lancamentosExibidos?.length" class="text-center">
                <ng-container *ngFor="let lancamento of dashboard?.lancamentosExibidos; last as last">
                  <div class="movimentacao"  >
                    <h5 class="card-subtitle mb-3 tipoConta">
                      <strong>{{lancamento.tipoConta}}</strong>
                    </h5>                                                                                       
                    <h6 class="card-subtitle mb-2">
                      Valor: {{lancamento.valor | currency:"BRL"}}
                    </h6>               
                    <h6 class="card-subtitle mb-2">
                      Descrição: {{lancamento.descricao}}
                    </h6>               
                    <h6 class="card-subtitle mb-2 ">
                      Tipo de Movimentação: {{lancamento.tipo}}
                    </h6>                                                                                                                                 
                    <h6 class="card-subtitle mb-2 ">
                      Data: {{lancamento.data | date:"dd/MM/yyyy"}}
                    </h6>                            
                  </div>
                  <div *ngIf="!last">
                    <div class="separador">
                    </div>
                  </div>
                </ng-container>                        
              </div>  
              <div *ngIf="!!!dashboard?.lancamentosExibidos?.length">
                <div class="movimentacao">
                  <h5 class="card-subtitle tipoConta">
                    <strong>Não há movimentações com os filtros informados</strong>
                  </h5>                                                                                                         
                </div>
              </div>                    
            </div>                                
          </div>
        </div>
      </div>       
    </div>
  </div>
  <ng-template #modalFiltro let-modal>
    <div class="modal-custom-content">
      <div class="modal-header">
        <h5 class="modal-title" id="">Filtro</h5>  
        <button type="button" class="close" aria-label="Close" (click)="fecharModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">        
        <form>
          <div class="form-group">
            <label>
              Data Inicial
            </label>
            <input type="date" class="form-control" name="dataInicio" [(ngModel)]="inpDataInicio">                            
          </div>
          <div class="form-group">
            <label>
              Data Final
            </label>
            <input type="date" class="form-control" name="dataFim" [(ngModel)]="inputDataFim">                             
          </div>
          <div class="form-group">
            <label>
              Tipo de Conta
            </label>
            <select name="seltipoConta" class="form-control" [(ngModel)]="seltipoConta">
              <option value="3">
                Todas
              </option>
              <option value="2">
                Débito
              </option>
              <option value="1">
                Crédito
              </option>
            </select>
          </div>
          <h4 class="aviso" id="" *ngIf="mostrarErroData">
            A data inicial precisa ser anterior à data final
          </h4>
        </form>          
      </div>
      <div class="modal-footer">                    
        <button type="button" class="btn btn-primary" (click)="salvarFiltro()">Salvar Filtro</button>
      </div>                                          
    </div> 
  </ng-template>  
  <ng-template #modalMovimentarConta let-modal>
    <div class="modal-custom-content">
      <div class="modal-header">
        <h5 class="modal-title" id="">Movimentar conta</h5>  
        <button type="button" class="close" aria-label="Close" (click)="fecharModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label>
              Descrição
            </label>
            <input type="text" class="form-control" name="descricaoOperacao" [(ngModel)]="inpDescricaoOperacao">                            
          </div>    
          <div class="form-group">
            <label>
              Valor
            </label>
            <input type="number" class="form-control" name="valorOperacao" [(ngModel)]="inpValorOperacao">                            
          </div>    
          <div class="form-group">
            <label>
              Data Operação
            </label>
            <input type="date" class="form-control" name="dataOperacao" [(ngModel)]="inpDataOperacao">                            
          </div>                        
          <div class="form-group">
            <label>
              Tipo da Operação
            </label>
            <select name="tipoOperacao" class="form-control" [(ngModel)]="selTipoOperacao" (change)="changeTipoOperacao()">
              <option value="25">
                Recebimento
              </option>
              <option value="26">
                Despesa
              </option>
              <option value="27">
                Transferência de conta débito para crédito
              </option>                                
            </select>
          </div>
          <div class="form-group" name="groupTipoContaOperacao" *ngIf="selTipoOperacao != '27'">
            <label>
              Conta
            </label>
            <select name="tipoContaOperacao" class="form-control" [(ngModel)]="selTipoContaOperacao">
              <option value="Debito">
                Débito
              </option>
              <option value="Credito">
                Crédito
              </option>                                
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">                    
        <button type="button" class="btn btn-primary" (click)="realizarOperacao()">Realizar Operação</button>
      </div>                            
    </div>    
  </ng-template>
  <ng-template #modalTransferenciaEntreContas let-modal>
    <div class="modal-custom-content">
      <div class="modal-header ">
        <h5 class="modal-title" id="exampleModalLongTitle">Transfência entre contas</h5>    
        <button type="button" class="close" aria-label="Close" (click)="fecharModal()">
          <span aria-hidden="true">&times;</span>
        </button>                                                           
      </div>
      <div class="modal-body text-center">
        <form>
          <div class="form-group">
            <label>
              Descrição
            </label>
            <input type="text" class="form-control" name="descricaoTransferencia" [(ngModel)]="inpDescricaoTransferencia">                            
          </div>    
          <div class="form-group">
            <label>
              Valor
            </label>
            <input type="number" class="form-control" name="valorTransferencia" [(ngModel)]="inpValorTransferencia">                            
          </div>    
          <div class="form-group">
            <label>
              Data Operação
            </label>
            <input type="date" class="form-control" name="dataTransferencia" [(ngModel)]="inpDataTransferencia">                            
          </div>   
          <div class="form-group">
            <label>
              Login da conta para transferir
            </label>
            <input type="text" class="form-control" name="loginTransferencia" [(ngModel)]="inpLoginTransferencia">                            
          </div>                                                                             
        </form>        
      </div>  
      <div class="modal-footer">                    
        <button type="button" class="btn btn-primary" (click)="realizarTransferencia()">Realizar Transferência</button>
      </div>
    </div>
  </ng-template>    
</div>